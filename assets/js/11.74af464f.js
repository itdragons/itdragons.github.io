(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{346:function(s,e,n){"use strict";n.r(e);var a=n(3),t=Object(a.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("blockquote",[e("p",[s._v("资料")])]),s._v(" "),e("p",[e("a",{attrs:{href:"https://www.jianshu.com/p/029661f38674",target:"_blank",rel:"noopener noreferrer"}},[s._v("Kubernetes对象之Deployment"),e("OutboundLink")],1)]),s._v(" "),e("p",[e("a",{attrs:{href:"https://www.jianshu.com/p/c24fd0d132f6",target:"_blank",rel:"noopener noreferrer"}},[s._v("Kubernetes对象之Service"),e("OutboundLink")],1)]),s._v(" "),e("p",[e("a",{attrs:{href:"https://www.liangzl.com/get-article-detail-193360.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Mac下k8s安装"),e("OutboundLink")],1)]),s._v(" "),e("p",[e("a",{attrs:{href:"https://www.cnblogs.com/double-dong/p/11483670.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("使用kubeadm快速部署一套K8S集群"),e("OutboundLink")],1)]),s._v(" "),e("h1",{attrs:{id:"常用命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[s._v("#")]),s._v(" 常用命令")]),s._v(" "),e("p",[s._v("查看集群节点命令（ Ready）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("kubectl get node\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("删除集群节点")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("kubectl delete node {name}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("查看所有的 Pod 命令")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("kubectl get pods --all-namespaces\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("node节点查看日志")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("journalctl -f -u kubelet\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("删除pod、deployment")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#删除pod\n[root]# kubectl get pod -n jenkins\nNAME                        READY     STATUS    RESTARTS   AGE\njenkins2-8698b5449c-grbdm   1/1       Running   0          8s\n[root]# kubectl delete pod jenkins2-8698b5449c-grbdm -n jenkins\npod "jenkins2-8698b5449c-grbdm" deleted\n\n#删除deployment\n[root]# kubectl get deployment -n jenkins\nNAME       DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE\njenkins2   1         1         1            1           17h\n[root]# kubectl delete deployment jenkins2 -n jenkins\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("h1",{attrs:{id:"安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),e("h2",{attrs:{id:"环境要求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#环境要求"}},[s._v("#")]),s._v(" 环境要求")]),s._v(" "),e("p",[s._v("环境：centos 7.4 +")]),s._v(" "),e("p",[s._v("硬件需求：CPU>=2c ,内存>=2G")]),s._v(" "),e("p",[e("strong",[s._v("环境角色")])]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("IP")]),s._v(" "),e("th",[s._v("角色")]),s._v(" "),e("th",[s._v("安装软件")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("10.10.10.100")]),s._v(" "),e("td",[s._v("k8s-Master")]),s._v(" "),e("td",[s._v("kube-apiserver "),e("br"),s._v("kube-schduler "),e("br"),s._v("kube-controller-manager "),e("br"),s._v("docker "),e("br"),s._v("flannel "),e("br"),s._v("kubelet")])]),s._v(" "),e("tr",[e("td",[s._v("10.10.10.101")]),s._v(" "),e("td",[s._v("k8s-node01")]),s._v(" "),e("td",[s._v("kubelet "),e("br"),s._v("kube-proxy "),e("br"),s._v("docker "),e("br"),s._v("flannel")])]),s._v(" "),e("tr",[e("td",[s._v("10.10.10.102")]),s._v(" "),e("td",[s._v("k8s-node01")]),s._v(" "),e("td",[s._v("kubelet "),e("br"),s._v("kube-proxy "),e("br"),s._v("docker "),e("br"),s._v("flannel")])])])]),s._v(" "),e("h2",{attrs:{id:"环境初始化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#环境初始化"}},[s._v("#")]),s._v(" 环境初始化")]),s._v(" "),e("blockquote",[e("p",[s._v("以下所有操作，在三台节点全部执行")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#1.关闭防火墙及selinux\n# 临时\nsystemctl stop firewalld && systemctl disable firewalld\n# 永久\nsed -i 's/^SELINUX=.*/SELINUX=disabled/' /etc/selinux/config  && setenforce 0\n\n#2.关闭 swap 分区\n# 临时\nswapoff -a \n# 永久\nsed -i '/ swap / s/^\\(.*\\)$/#\\1/g' /etc/fstab\n\n#3. 修改下面内核参数，将桥接的IPv4流量传递到iptables的链，否则请求数据经过iptables的路由可能有问题\ncat <<EOF >  /etc/sysctl.d/k8s.conf\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nEOF\nsysctl --system\n\n#4.使能ip转发\necho 1 > /proc/sys/net/ipv4/ip_forward\n\n#5.设置系统时区并同步时间服务器\nyum install -y ntpdate\nntpdate time.windows.com\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br")])]),e("p",[s._v("分别在10.10.10.100、10.10.10.101、10.10.10.102上设置主机名及配置hosts")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("hostnamectl set-hostname k8s-master（10.10.10.100主机打命令）\nhostnamectl set-hostname k8s-node01（10.10.10.101主机打命令）\nhostnamectl set-hostname k8s-node02 (10.10.10.102主机打命令)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("在所有主机上上添加如下命令")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cat <<EOF >> /etc/hosts \n10.10.10.100 k8s-master \n10.10.10.101 k8s-node01\n10.10.10.102 k8s-node02 \nEOF\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h2",{attrs:{id:"安装kubeadm环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装kubeadm环境"}},[s._v("#")]),s._v(" 安装kubeadm环境")]),s._v(" "),e("blockquote",[e("p",[s._v("以下操作所有节点进行")])]),s._v(" "),e("h3",{attrs:{id:"添加kubernetes-yum软件源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加kubernetes-yum软件源"}},[s._v("#")]),s._v(" 添加kubernetes YUM软件源")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cat <<EOF > /etc/yum.repos.d/kubernetes.repo\n[kubernetes]\nname=Kubernetes\nbaseurl=http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64\nenabled=1\ngpgcheck=0\nrepo_gpgcheck=0\ngpgkey=http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\nEOF\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("h3",{attrs:{id:"安装docker、kubelet、kubeadm、kubectl"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装docker、kubelet、kubeadm、kubectl"}},[s._v("#")]),s._v(" 安装docker、kubelet、kubeadm、kubectl")]),s._v(" "),e("ul",[e("li",[s._v("kubeadm：快速安装K8S工具")]),s._v(" "),e("li",[s._v("kubelet：负责管理pods和它们上面的容器，维护容器的生命周期")]),s._v(" "),e("li",[s._v("kubectl：K8S命令行工具")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("yum install -y kubelet-1.16.5 kubeadm-1.16.5 kubectl-1.16.5 --disableexcludes=kubernetes\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("设置开机自启动")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("systemctl enable kubelet && systemctl start kubelet\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("查看kubeadm、kubelet版本")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("kubelet --version\n\nkubeadm version\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"部署kubernetes-master"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#部署kubernetes-master"}},[s._v("#")]),s._v(" 部署Kubernetes Master")]),s._v(" "),e("blockquote",[e("p",[s._v("只需要在Master 节点执行，这里的apiserve需要修改成自己的master地址")]),s._v(" "),e("p",[s._v("如果已经初始化，可先执行 kubeadm reset，重新初始化节点配置")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("kubeadm init \\\n--apiserver-advertise-address=10.10.10.100 \\\n--image-repository registry.aliyuncs.com/google_containers \\\n--kubernetes-version v1.16.5 \\\n--service-cidr=10.1.0.0/16 \\\n--pod-network-cidr=10.244.0.0/16\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("根据输出提示操作：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mkdir -p $HOME/.kube\n\nsudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n\nsudo chown $(id -u):$(id -g) $HOME/.kube/config\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("默认token的有效期为24小时，当过期之后，该token就不可用了，如果后续有nodes节点加入，解决方法如下：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("重新获取token和hash\nkubeadm token create --print-join-command \n\nkubeadm token list\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"加入kubernetes-node"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#加入kubernetes-node"}},[s._v("#")]),s._v(" 加入Kubernetes Node")]),s._v(" "),e("blockquote",[e("p",[s._v("在两个 Node 节点执行")]),s._v(" "),e("p",[s._v("节点加入集群的命令格式是："),e("span",{staticStyle:{color:"red"}},[s._v("kubeadm join {master-ip}:{master-port}  --token {token} --discovery-token-ca-cert-hash sha256:{hash}")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("使用kubeadm join 注册Node节点到Matser，kubeadm join 的内容在上面kubeadm init 已经生成好了\n\nkubeadm join 10.10.10.100:6443 --token vce5u6.ukmp2rst2l0rpnb5 \\\n    --discovery-token-ca-cert-hash sha256:bebed0b80eebf3b912c8fd13d16d6163bd9e3d1680394368ea9e93eac3b481e5 \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"安装网络插件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装网络插件"}},[s._v("#")]),s._v(" 安装网络插件")]),s._v(" "),e("blockquote",[e("p",[s._v("只需要在Master 节点执行，安装flannel")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#应用flannel网络组件\nkubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("查看集群的node状态，所有节点的状态都需要为Ready")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("kubectl get nodes\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h1",{attrs:{id:"常见问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[s._v("#")]),s._v(" 常见问题")]),s._v(" "),e("h2",{attrs:{id:"k8s-节点状态为notready"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#k8s-节点状态为notready"}},[s._v("#")]),s._v(" k8s 节点状态为NotReady")]),s._v(" "),e("p",[s._v("通过命令"),e("code",[s._v("journalctl -f -u kubelet")]),s._v(" 获取到以下日志信息")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("7月 08 18:01:01 k8s-node01 kubelet[1120]: W0708 18:01:01.626451    1120 cni.go:237] Unable to update cni config: no valid networks found in /etc/cni/net.d\n7月 08 18:01:02 k8s-node01 kubelet[1120]: E0708 18:01:02.490923    1120 kubelet.go:2187] Container runtime network not ready: NetworkReady=false reason:NetworkPluginNotReady message:docker: network plugin is not ready: cni config uninitialized\n7月 08 18:01:06 k8s-node01 kubelet[1120]: W0708 18:01:06.627114    1120 cni.go:171] Error loading CNI config list file /etc/cni/net.d/10-flannel.conflist: error parsing configuration list: no 'plugins' key\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("根据提示/etc/cni/net.d/10-flannel.conflist缺失plugins，通过以下命令覆盖")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('cat <<EOF >  /etc/cni/net.d/10-flannel.conflist\n{\n  "name": "cbr0",\n  "cniVersion": "0.3.1",\n  "plugins": [\n    {\n      "type": "flannel",\n      "delegate": {\n        "hairpinMode": true,\n        "isDefaultGateway": true\n      }\n    },\n    {\n      "type": "portmap",\n      "capabilities": {\n        "portMappings": true\n      }\n    }\n  ]\n}\nEOF\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br")])]),e("p",[s._v("在master执行kubectl get nodes，查看状态")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("NAME         STATUS   ROLES    AGE    VERSION\nk8s-master   Ready    master   179m   v1.16.6-beta.0\nk8s-node01   Ready    <none>   22m    v1.16.6-beta.0\nk8s-node02   Ready    <none>   141m   v1.16.6-beta.0\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h1",{attrs:{id:"部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[s._v("#")]),s._v(" 部署")]),s._v(" "),e("h2",{attrs:{id:"nginx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[s._v("#")]),s._v(" nginx")]),s._v(" "),e("p",[s._v("nginx.yaml")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nginx-deployment\nspec:\n  selector:\n    matchLabels:\n      app: nginx\n  replicas: 3\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n      - name: nginx\n        image: nginx:alpine\n        ports:\n        - containerPort: 80\n        volumeMounts:\n        - name: nginx-html\n          mountPath: /usr/share/nginx/html\n      volumes:\n      - name: nginx-html\n        hostPath:\n          path: /home/k8s/nginx/html\n\n---\n\napiVersion: v1\nkind: Service\nmetadata:\n  name: nginx-service\nspec:\n  selector:\n    app: nginx\n  ports:\n  - protocol: TCP\n    port: 80\n    targetPort: 80\n    nodePort: 30080\n  type: NodePort\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br")])])])}),[],!1,null,null,null);e.default=t.exports}}]);